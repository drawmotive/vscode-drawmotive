{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://vscode-drawmotive/external node-commonjs \"util\"","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/sync-reader.js","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/chunkstream.js","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/packer.js","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/png.js","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/parser-sync.js","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/packer-async.js","webpack://vscode-drawmotive/external node-commonjs \"zlib\"","webpack://vscode-drawmotive/external node-commonjs \"buffer\"","webpack://vscode-drawmotive/external node-commonjs \"stream\"","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/format-normaliser.js","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/packer-sync.js","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/bitpacker.js","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/filter-parse-sync.js","webpack://vscode-drawmotive/./src/DrawmotiveEditorProvider.ts","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/parser.js","webpack://vscode-drawmotive/external commonjs \"vscode\"","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/filter-parse-async.js","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/parser-async.js","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/filter-parse.js","webpack://vscode-drawmotive/external node-commonjs \"assert\"","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/png-sync.js","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/constants.js","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/bitmapper.js","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/interlace.js","webpack://vscode-drawmotive/./src/extension.ts","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/filter-pack.js","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/sync-inflate.js","webpack://vscode-drawmotive/./src/pngMetadata.ts","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/crc.js","webpack://vscode-drawmotive/./node_modules/.pnpm/pngjs@7.0.0/node_modules/pngjs/lib/paeth-predictor.js","webpack://vscode-drawmotive/webpack/bootstrap","webpack://vscode-drawmotive/webpack/startup"],"sourcesContent":["module.exports = require(\"util\");","\"use strict\";\n\nlet SyncReader = (module.exports = function (buffer) {\n  this._buffer = buffer;\n  this._reads = [];\n});\n\nSyncReader.prototype.read = function (length, callback) {\n  this._reads.push({\n    length: Math.abs(length), // if length < 0 then at most this length\n    allowLess: length < 0,\n    func: callback,\n  });\n};\n\nSyncReader.prototype.process = function () {\n  // as long as there is any data and read requests\n  while (this._reads.length > 0 && this._buffer.length) {\n    let read = this._reads[0];\n\n    if (\n      this._buffer.length &&\n      (this._buffer.length >= read.length || read.allowLess)\n    ) {\n      // ok there is any data so that we can satisfy this request\n      this._reads.shift(); // == read\n\n      let buf = this._buffer;\n\n      this._buffer = buf.slice(read.length);\n\n      read.func.call(this, buf.slice(0, read.length));\n    } else {\n      break;\n    }\n  }\n\n  if (this._reads.length > 0) {\n    throw new Error(\"There are some read requests waitng on finished stream\");\n  }\n\n  if (this._buffer.length > 0) {\n    throw new Error(\"unrecognised content at end of stream\");\n  }\n};\n","\"use strict\";\n\nlet util = require(\"util\");\nlet Stream = require(\"stream\");\n\nlet ChunkStream = (module.exports = function () {\n  Stream.call(this);\n\n  this._buffers = [];\n  this._buffered = 0;\n\n  this._reads = [];\n  this._paused = false;\n\n  this._encoding = \"utf8\";\n  this.writable = true;\n});\nutil.inherits(ChunkStream, Stream);\n\nChunkStream.prototype.read = function (length, callback) {\n  this._reads.push({\n    length: Math.abs(length), // if length < 0 then at most this length\n    allowLess: length < 0,\n    func: callback,\n  });\n\n  process.nextTick(\n    function () {\n      this._process();\n\n      // its paused and there is not enought data then ask for more\n      if (this._paused && this._reads && this._reads.length > 0) {\n        this._paused = false;\n\n        this.emit(\"drain\");\n      }\n    }.bind(this)\n  );\n};\n\nChunkStream.prototype.write = function (data, encoding) {\n  if (!this.writable) {\n    this.emit(\"error\", new Error(\"Stream not writable\"));\n    return false;\n  }\n\n  let dataBuffer;\n  if (Buffer.isBuffer(data)) {\n    dataBuffer = data;\n  } else {\n    dataBuffer = Buffer.from(data, encoding || this._encoding);\n  }\n\n  this._buffers.push(dataBuffer);\n  this._buffered += dataBuffer.length;\n\n  this._process();\n\n  // ok if there are no more read requests\n  if (this._reads && this._reads.length === 0) {\n    this._paused = true;\n  }\n\n  return this.writable && !this._paused;\n};\n\nChunkStream.prototype.end = function (data, encoding) {\n  if (data) {\n    this.write(data, encoding);\n  }\n\n  this.writable = false;\n\n  // already destroyed\n  if (!this._buffers) {\n    return;\n  }\n\n  // enqueue or handle end\n  if (this._buffers.length === 0) {\n    this._end();\n  } else {\n    this._buffers.push(null);\n    this._process();\n  }\n};\n\nChunkStream.prototype.destroySoon = ChunkStream.prototype.end;\n\nChunkStream.prototype._end = function () {\n  if (this._reads.length > 0) {\n    this.emit(\"error\", new Error(\"Unexpected end of input\"));\n  }\n\n  this.destroy();\n};\n\nChunkStream.prototype.destroy = function () {\n  if (!this._buffers) {\n    return;\n  }\n\n  this.writable = false;\n  this._reads = null;\n  this._buffers = null;\n\n  this.emit(\"close\");\n};\n\nChunkStream.prototype._processReadAllowingLess = function (read) {\n  // ok there is any data so that we can satisfy this request\n  this._reads.shift(); // == read\n\n  // first we need to peek into first buffer\n  let smallerBuf = this._buffers[0];\n\n  // ok there is more data than we need\n  if (smallerBuf.length > read.length) {\n    this._buffered -= read.length;\n    this._buffers[0] = smallerBuf.slice(read.length);\n\n    read.func.call(this, smallerBuf.slice(0, read.length));\n  } else {\n    // ok this is less than maximum length so use it all\n    this._buffered -= smallerBuf.length;\n    this._buffers.shift(); // == smallerBuf\n\n    read.func.call(this, smallerBuf);\n  }\n};\n\nChunkStream.prototype._processRead = function (read) {\n  this._reads.shift(); // == read\n\n  let pos = 0;\n  let count = 0;\n  let data = Buffer.alloc(read.length);\n\n  // create buffer for all data\n  while (pos < read.length) {\n    let buf = this._buffers[count++];\n    let len = Math.min(buf.length, read.length - pos);\n\n    buf.copy(data, pos, 0, len);\n    pos += len;\n\n    // last buffer wasn't used all so just slice it and leave\n    if (len !== buf.length) {\n      this._buffers[--count] = buf.slice(len);\n    }\n  }\n\n  // remove all used buffers\n  if (count > 0) {\n    this._buffers.splice(0, count);\n  }\n\n  this._buffered -= read.length;\n\n  read.func.call(this, data);\n};\n\nChunkStream.prototype._process = function () {\n  try {\n    // as long as there is any data and read requests\n    while (this._buffered > 0 && this._reads && this._reads.length > 0) {\n      let read = this._reads[0];\n\n      // read any data (but no more than length)\n      if (read.allowLess) {\n        this._processReadAllowingLess(read);\n      } else if (this._buffered >= read.length) {\n        // ok we can meet some expectations\n\n        this._processRead(read);\n      } else {\n        // not enought data to satisfy first request in queue\n        // so we need to wait for more\n        break;\n      }\n    }\n\n    if (this._buffers && !this.writable) {\n      this._end();\n    }\n  } catch (ex) {\n    this.emit(\"error\", ex);\n  }\n};\n","\"use strict\";\n\nlet constants = require(\"./constants\");\nlet CrcStream = require(\"./crc\");\nlet bitPacker = require(\"./bitpacker\");\nlet filter = require(\"./filter-pack\");\nlet zlib = require(\"zlib\");\n\nlet Packer = (module.exports = function (options) {\n  this._options = options;\n\n  options.deflateChunkSize = options.deflateChunkSize || 32 * 1024;\n  options.deflateLevel =\n    options.deflateLevel != null ? options.deflateLevel : 9;\n  options.deflateStrategy =\n    options.deflateStrategy != null ? options.deflateStrategy : 3;\n  options.inputHasAlpha =\n    options.inputHasAlpha != null ? options.inputHasAlpha : true;\n  options.deflateFactory = options.deflateFactory || zlib.createDeflate;\n  options.bitDepth = options.bitDepth || 8;\n  // This is outputColorType\n  options.colorType =\n    typeof options.colorType === \"number\"\n      ? options.colorType\n      : constants.COLORTYPE_COLOR_ALPHA;\n  options.inputColorType =\n    typeof options.inputColorType === \"number\"\n      ? options.inputColorType\n      : constants.COLORTYPE_COLOR_ALPHA;\n\n  if (\n    [\n      constants.COLORTYPE_GRAYSCALE,\n      constants.COLORTYPE_COLOR,\n      constants.COLORTYPE_COLOR_ALPHA,\n      constants.COLORTYPE_ALPHA,\n    ].indexOf(options.colorType) === -1\n  ) {\n    throw new Error(\n      \"option color type:\" + options.colorType + \" is not supported at present\"\n    );\n  }\n  if (\n    [\n      constants.COLORTYPE_GRAYSCALE,\n      constants.COLORTYPE_COLOR,\n      constants.COLORTYPE_COLOR_ALPHA,\n      constants.COLORTYPE_ALPHA,\n    ].indexOf(options.inputColorType) === -1\n  ) {\n    throw new Error(\n      \"option input color type:\" +\n        options.inputColorType +\n        \" is not supported at present\"\n    );\n  }\n  if (options.bitDepth !== 8 && options.bitDepth !== 16) {\n    throw new Error(\n      \"option bit depth:\" + options.bitDepth + \" is not supported at present\"\n    );\n  }\n});\n\nPacker.prototype.getDeflateOptions = function () {\n  return {\n    chunkSize: this._options.deflateChunkSize,\n    level: this._options.deflateLevel,\n    strategy: this._options.deflateStrategy,\n  };\n};\n\nPacker.prototype.createDeflate = function () {\n  return this._options.deflateFactory(this.getDeflateOptions());\n};\n\nPacker.prototype.filterData = function (data, width, height) {\n  // convert to correct format for filtering (e.g. right bpp and bit depth)\n  let packedData = bitPacker(data, width, height, this._options);\n\n  // filter pixel data\n  let bpp = constants.COLORTYPE_TO_BPP_MAP[this._options.colorType];\n  let filteredData = filter(packedData, width, height, this._options, bpp);\n  return filteredData;\n};\n\nPacker.prototype._packChunk = function (type, data) {\n  let len = data ? data.length : 0;\n  let buf = Buffer.alloc(len + 12);\n\n  buf.writeUInt32BE(len, 0);\n  buf.writeUInt32BE(type, 4);\n\n  if (data) {\n    data.copy(buf, 8);\n  }\n\n  buf.writeInt32BE(\n    CrcStream.crc32(buf.slice(4, buf.length - 4)),\n    buf.length - 4\n  );\n  return buf;\n};\n\nPacker.prototype.packGAMA = function (gamma) {\n  let buf = Buffer.alloc(4);\n  buf.writeUInt32BE(Math.floor(gamma * constants.GAMMA_DIVISION), 0);\n  return this._packChunk(constants.TYPE_gAMA, buf);\n};\n\nPacker.prototype.packIHDR = function (width, height) {\n  let buf = Buffer.alloc(13);\n  buf.writeUInt32BE(width, 0);\n  buf.writeUInt32BE(height, 4);\n  buf[8] = this._options.bitDepth; // Bit depth\n  buf[9] = this._options.colorType; // colorType\n  buf[10] = 0; // compression\n  buf[11] = 0; // filter\n  buf[12] = 0; // interlace\n\n  return this._packChunk(constants.TYPE_IHDR, buf);\n};\n\nPacker.prototype.packIDAT = function (data) {\n  return this._packChunk(constants.TYPE_IDAT, data);\n};\n\nPacker.prototype.packIEND = function () {\n  return this._packChunk(constants.TYPE_IEND, null);\n};\n","\"use strict\";\n\nlet util = require(\"util\");\nlet Stream = require(\"stream\");\nlet Parser = require(\"./parser-async\");\nlet Packer = require(\"./packer-async\");\nlet PNGSync = require(\"./png-sync\");\n\nlet PNG = (exports.PNG = function (options) {\n  Stream.call(this);\n\n  options = options || {}; // eslint-disable-line no-param-reassign\n\n  // coerce pixel dimensions to integers (also coerces undefined -> 0):\n  this.width = options.width | 0;\n  this.height = options.height | 0;\n\n  this.data =\n    this.width > 0 && this.height > 0\n      ? Buffer.alloc(4 * this.width * this.height)\n      : null;\n\n  if (options.fill && this.data) {\n    this.data.fill(0);\n  }\n\n  this.gamma = 0;\n  this.readable = this.writable = true;\n\n  this._parser = new Parser(options);\n\n  this._parser.on(\"error\", this.emit.bind(this, \"error\"));\n  this._parser.on(\"close\", this._handleClose.bind(this));\n  this._parser.on(\"metadata\", this._metadata.bind(this));\n  this._parser.on(\"gamma\", this._gamma.bind(this));\n  this._parser.on(\n    \"parsed\",\n    function (data) {\n      this.data = data;\n      this.emit(\"parsed\", data);\n    }.bind(this)\n  );\n\n  this._packer = new Packer(options);\n  this._packer.on(\"data\", this.emit.bind(this, \"data\"));\n  this._packer.on(\"end\", this.emit.bind(this, \"end\"));\n  this._parser.on(\"close\", this._handleClose.bind(this));\n  this._packer.on(\"error\", this.emit.bind(this, \"error\"));\n});\nutil.inherits(PNG, Stream);\n\nPNG.sync = PNGSync;\n\nPNG.prototype.pack = function () {\n  if (!this.data || !this.data.length) {\n    this.emit(\"error\", \"No data provided\");\n    return this;\n  }\n\n  process.nextTick(\n    function () {\n      this._packer.pack(this.data, this.width, this.height, this.gamma);\n    }.bind(this)\n  );\n\n  return this;\n};\n\nPNG.prototype.parse = function (data, callback) {\n  if (callback) {\n    let onParsed, onError;\n\n    onParsed = function (parsedData) {\n      this.removeListener(\"error\", onError);\n\n      this.data = parsedData;\n      callback(null, this);\n    }.bind(this);\n\n    onError = function (err) {\n      this.removeListener(\"parsed\", onParsed);\n\n      callback(err, null);\n    }.bind(this);\n\n    this.once(\"parsed\", onParsed);\n    this.once(\"error\", onError);\n  }\n\n  this.end(data);\n  return this;\n};\n\nPNG.prototype.write = function (data) {\n  this._parser.write(data);\n  return true;\n};\n\nPNG.prototype.end = function (data) {\n  this._parser.end(data);\n};\n\nPNG.prototype._metadata = function (metadata) {\n  this.width = metadata.width;\n  this.height = metadata.height;\n\n  this.emit(\"metadata\", metadata);\n};\n\nPNG.prototype._gamma = function (gamma) {\n  this.gamma = gamma;\n};\n\nPNG.prototype._handleClose = function () {\n  if (!this._parser.writable && !this._packer.readable) {\n    this.emit(\"close\");\n  }\n};\n\nPNG.bitblt = function (src, dst, srcX, srcY, width, height, deltaX, deltaY) {\n  // eslint-disable-line max-params\n  // coerce pixel dimensions to integers (also coerces undefined -> 0):\n  /* eslint-disable no-param-reassign */\n  srcX |= 0;\n  srcY |= 0;\n  width |= 0;\n  height |= 0;\n  deltaX |= 0;\n  deltaY |= 0;\n  /* eslint-enable no-param-reassign */\n\n  if (\n    srcX > src.width ||\n    srcY > src.height ||\n    srcX + width > src.width ||\n    srcY + height > src.height\n  ) {\n    throw new Error(\"bitblt reading outside image\");\n  }\n\n  if (\n    deltaX > dst.width ||\n    deltaY > dst.height ||\n    deltaX + width > dst.width ||\n    deltaY + height > dst.height\n  ) {\n    throw new Error(\"bitblt writing outside image\");\n  }\n\n  for (let y = 0; y < height; y++) {\n    src.data.copy(\n      dst.data,\n      ((deltaY + y) * dst.width + deltaX) << 2,\n      ((srcY + y) * src.width + srcX) << 2,\n      ((srcY + y) * src.width + srcX + width) << 2\n    );\n  }\n};\n\nPNG.prototype.bitblt = function (\n  dst,\n  srcX,\n  srcY,\n  width,\n  height,\n  deltaX,\n  deltaY\n) {\n  // eslint-disable-line max-params\n\n  PNG.bitblt(this, dst, srcX, srcY, width, height, deltaX, deltaY);\n  return this;\n};\n\nPNG.adjustGamma = function (src) {\n  if (src.gamma) {\n    for (let y = 0; y < src.height; y++) {\n      for (let x = 0; x < src.width; x++) {\n        let idx = (src.width * y + x) << 2;\n\n        for (let i = 0; i < 3; i++) {\n          let sample = src.data[idx + i] / 255;\n          sample = Math.pow(sample, 1 / 2.2 / src.gamma);\n          src.data[idx + i] = Math.round(sample * 255);\n        }\n      }\n    }\n    src.gamma = 0;\n  }\n};\n\nPNG.prototype.adjustGamma = function () {\n  PNG.adjustGamma(this);\n};\n","\"use strict\";\n\nlet hasSyncZlib = true;\nlet zlib = require(\"zlib\");\nlet inflateSync = require(\"./sync-inflate\");\nif (!zlib.deflateSync) {\n  hasSyncZlib = false;\n}\nlet SyncReader = require(\"./sync-reader\");\nlet FilterSync = require(\"./filter-parse-sync\");\nlet Parser = require(\"./parser\");\nlet bitmapper = require(\"./bitmapper\");\nlet formatNormaliser = require(\"./format-normaliser\");\n\nmodule.exports = function (buffer, options) {\n  if (!hasSyncZlib) {\n    throw new Error(\n      \"To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0\"\n    );\n  }\n\n  let err;\n  function handleError(_err_) {\n    err = _err_;\n  }\n\n  let metaData;\n  function handleMetaData(_metaData_) {\n    metaData = _metaData_;\n  }\n\n  function handleTransColor(transColor) {\n    metaData.transColor = transColor;\n  }\n\n  function handlePalette(palette) {\n    metaData.palette = palette;\n  }\n\n  function handleSimpleTransparency() {\n    metaData.alpha = true;\n  }\n\n  let gamma;\n  function handleGamma(_gamma_) {\n    gamma = _gamma_;\n  }\n\n  let inflateDataList = [];\n  function handleInflateData(inflatedData) {\n    inflateDataList.push(inflatedData);\n  }\n\n  let reader = new SyncReader(buffer);\n\n  let parser = new Parser(options, {\n    read: reader.read.bind(reader),\n    error: handleError,\n    metadata: handleMetaData,\n    gamma: handleGamma,\n    palette: handlePalette,\n    transColor: handleTransColor,\n    inflateData: handleInflateData,\n    simpleTransparency: handleSimpleTransparency,\n  });\n\n  parser.start();\n  reader.process();\n\n  if (err) {\n    throw err;\n  }\n\n  //join together the inflate datas\n  let inflateData = Buffer.concat(inflateDataList);\n  inflateDataList.length = 0;\n\n  let inflatedData;\n  if (metaData.interlace) {\n    inflatedData = zlib.inflateSync(inflateData);\n  } else {\n    let rowSize =\n      ((metaData.width * metaData.bpp * metaData.depth + 7) >> 3) + 1;\n    let imageSize = rowSize * metaData.height;\n    inflatedData = inflateSync(inflateData, {\n      chunkSize: imageSize,\n      maxLength: imageSize,\n    });\n  }\n  inflateData = null;\n\n  if (!inflatedData || !inflatedData.length) {\n    throw new Error(\"bad png - invalid inflate data response\");\n  }\n\n  let unfilteredData = FilterSync.process(inflatedData, metaData);\n  inflateData = null;\n\n  let bitmapData = bitmapper.dataToBitMap(unfilteredData, metaData);\n  unfilteredData = null;\n\n  let normalisedBitmapData = formatNormaliser(\n    bitmapData,\n    metaData,\n    options.skipRescale\n  );\n\n  metaData.data = normalisedBitmapData;\n  metaData.gamma = gamma || 0;\n\n  return metaData;\n};\n","\"use strict\";\n\nlet util = require(\"util\");\nlet Stream = require(\"stream\");\nlet constants = require(\"./constants\");\nlet Packer = require(\"./packer\");\n\nlet PackerAsync = (module.exports = function (opt) {\n  Stream.call(this);\n\n  let options = opt || {};\n\n  this._packer = new Packer(options);\n  this._deflate = this._packer.createDeflate();\n\n  this.readable = true;\n});\nutil.inherits(PackerAsync, Stream);\n\nPackerAsync.prototype.pack = function (data, width, height, gamma) {\n  // Signature\n  this.emit(\"data\", Buffer.from(constants.PNG_SIGNATURE));\n  this.emit(\"data\", this._packer.packIHDR(width, height));\n\n  if (gamma) {\n    this.emit(\"data\", this._packer.packGAMA(gamma));\n  }\n\n  let filteredData = this._packer.filterData(data, width, height);\n\n  // compress it\n  this._deflate.on(\"error\", this.emit.bind(this, \"error\"));\n\n  this._deflate.on(\n    \"data\",\n    function (compressedData) {\n      this.emit(\"data\", this._packer.packIDAT(compressedData));\n    }.bind(this)\n  );\n\n  this._deflate.on(\n    \"end\",\n    function () {\n      this.emit(\"data\", this._packer.packIEND());\n      this.emit(\"end\");\n    }.bind(this)\n  );\n\n  this._deflate.end(filteredData);\n};\n","module.exports = require(\"zlib\");","module.exports = require(\"buffer\");","module.exports = require(\"stream\");","\"use strict\";\n\nfunction dePalette(indata, outdata, width, height, palette) {\n  let pxPos = 0;\n  // use values from palette\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      let color = palette[indata[pxPos]];\n\n      if (!color) {\n        throw new Error(\"index \" + indata[pxPos] + \" not in palette\");\n      }\n\n      for (let i = 0; i < 4; i++) {\n        outdata[pxPos + i] = color[i];\n      }\n      pxPos += 4;\n    }\n  }\n}\n\nfunction replaceTransparentColor(indata, outdata, width, height, transColor) {\n  let pxPos = 0;\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      let makeTrans = false;\n\n      if (transColor.length === 1) {\n        if (transColor[0] === indata[pxPos]) {\n          makeTrans = true;\n        }\n      } else if (\n        transColor[0] === indata[pxPos] &&\n        transColor[1] === indata[pxPos + 1] &&\n        transColor[2] === indata[pxPos + 2]\n      ) {\n        makeTrans = true;\n      }\n      if (makeTrans) {\n        for (let i = 0; i < 4; i++) {\n          outdata[pxPos + i] = 0;\n        }\n      }\n      pxPos += 4;\n    }\n  }\n}\n\nfunction scaleDepth(indata, outdata, width, height, depth) {\n  let maxOutSample = 255;\n  let maxInSample = Math.pow(2, depth) - 1;\n  let pxPos = 0;\n\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      for (let i = 0; i < 4; i++) {\n        outdata[pxPos + i] = Math.floor(\n          (indata[pxPos + i] * maxOutSample) / maxInSample + 0.5\n        );\n      }\n      pxPos += 4;\n    }\n  }\n}\n\nmodule.exports = function (indata, imageData, skipRescale = false) {\n  let depth = imageData.depth;\n  let width = imageData.width;\n  let height = imageData.height;\n  let colorType = imageData.colorType;\n  let transColor = imageData.transColor;\n  let palette = imageData.palette;\n\n  let outdata = indata; // only different for 16 bits\n\n  if (colorType === 3) {\n    // paletted\n    dePalette(indata, outdata, width, height, palette);\n  } else {\n    if (transColor) {\n      replaceTransparentColor(indata, outdata, width, height, transColor);\n    }\n    // if it needs scaling\n    if (depth !== 8 && !skipRescale) {\n      // if we need to change the buffer size\n      if (depth === 16) {\n        outdata = Buffer.alloc(width * height * 4);\n      }\n      scaleDepth(indata, outdata, width, height, depth);\n    }\n  }\n  return outdata;\n};\n","\"use strict\";\n\nlet hasSyncZlib = true;\nlet zlib = require(\"zlib\");\nif (!zlib.deflateSync) {\n  hasSyncZlib = false;\n}\nlet constants = require(\"./constants\");\nlet Packer = require(\"./packer\");\n\nmodule.exports = function (metaData, opt) {\n  if (!hasSyncZlib) {\n    throw new Error(\n      \"To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0\"\n    );\n  }\n\n  let options = opt || {};\n\n  let packer = new Packer(options);\n\n  let chunks = [];\n\n  // Signature\n  chunks.push(Buffer.from(constants.PNG_SIGNATURE));\n\n  // Header\n  chunks.push(packer.packIHDR(metaData.width, metaData.height));\n\n  if (metaData.gamma) {\n    chunks.push(packer.packGAMA(metaData.gamma));\n  }\n\n  let filteredData = packer.filterData(\n    metaData.data,\n    metaData.width,\n    metaData.height\n  );\n\n  // compress it\n  let compressedData = zlib.deflateSync(\n    filteredData,\n    packer.getDeflateOptions()\n  );\n  filteredData = null;\n\n  if (!compressedData || !compressedData.length) {\n    throw new Error(\"bad png - invalid compressed data response\");\n  }\n  chunks.push(packer.packIDAT(compressedData));\n\n  // End\n  chunks.push(packer.packIEND());\n\n  return Buffer.concat(chunks);\n};\n","\"use strict\";\n\nlet constants = require(\"./constants\");\n\nmodule.exports = function (dataIn, width, height, options) {\n  let outHasAlpha =\n    [constants.COLORTYPE_COLOR_ALPHA, constants.COLORTYPE_ALPHA].indexOf(\n      options.colorType\n    ) !== -1;\n  if (options.colorType === options.inputColorType) {\n    let bigEndian = (function () {\n      let buffer = new ArrayBuffer(2);\n      new DataView(buffer).setInt16(0, 256, true /* littleEndian */);\n      // Int16Array uses the platform's endianness.\n      return new Int16Array(buffer)[0] !== 256;\n    })();\n    // If no need to convert to grayscale and alpha is present/absent in both, take a fast route\n    if (options.bitDepth === 8 || (options.bitDepth === 16 && bigEndian)) {\n      return dataIn;\n    }\n  }\n\n  // map to a UInt16 array if data is 16bit, fix endianness below\n  let data = options.bitDepth !== 16 ? dataIn : new Uint16Array(dataIn.buffer);\n\n  let maxValue = 255;\n  let inBpp = constants.COLORTYPE_TO_BPP_MAP[options.inputColorType];\n  if (inBpp === 4 && !options.inputHasAlpha) {\n    inBpp = 3;\n  }\n  let outBpp = constants.COLORTYPE_TO_BPP_MAP[options.colorType];\n  if (options.bitDepth === 16) {\n    maxValue = 65535;\n    outBpp *= 2;\n  }\n  let outData = Buffer.alloc(width * height * outBpp);\n\n  let inIndex = 0;\n  let outIndex = 0;\n\n  let bgColor = options.bgColor || {};\n  if (bgColor.red === undefined) {\n    bgColor.red = maxValue;\n  }\n  if (bgColor.green === undefined) {\n    bgColor.green = maxValue;\n  }\n  if (bgColor.blue === undefined) {\n    bgColor.blue = maxValue;\n  }\n\n  function getRGBA() {\n    let red;\n    let green;\n    let blue;\n    let alpha = maxValue;\n    switch (options.inputColorType) {\n      case constants.COLORTYPE_COLOR_ALPHA:\n        alpha = data[inIndex + 3];\n        red = data[inIndex];\n        green = data[inIndex + 1];\n        blue = data[inIndex + 2];\n        break;\n      case constants.COLORTYPE_COLOR:\n        red = data[inIndex];\n        green = data[inIndex + 1];\n        blue = data[inIndex + 2];\n        break;\n      case constants.COLORTYPE_ALPHA:\n        alpha = data[inIndex + 1];\n        red = data[inIndex];\n        green = red;\n        blue = red;\n        break;\n      case constants.COLORTYPE_GRAYSCALE:\n        red = data[inIndex];\n        green = red;\n        blue = red;\n        break;\n      default:\n        throw new Error(\n          \"input color type:\" +\n            options.inputColorType +\n            \" is not supported at present\"\n        );\n    }\n\n    if (options.inputHasAlpha) {\n      if (!outHasAlpha) {\n        alpha /= maxValue;\n        red = Math.min(\n          Math.max(Math.round((1 - alpha) * bgColor.red + alpha * red), 0),\n          maxValue\n        );\n        green = Math.min(\n          Math.max(Math.round((1 - alpha) * bgColor.green + alpha * green), 0),\n          maxValue\n        );\n        blue = Math.min(\n          Math.max(Math.round((1 - alpha) * bgColor.blue + alpha * blue), 0),\n          maxValue\n        );\n      }\n    }\n    return { red: red, green: green, blue: blue, alpha: alpha };\n  }\n\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      let rgba = getRGBA(data, inIndex);\n\n      switch (options.colorType) {\n        case constants.COLORTYPE_COLOR_ALPHA:\n        case constants.COLORTYPE_COLOR:\n          if (options.bitDepth === 8) {\n            outData[outIndex] = rgba.red;\n            outData[outIndex + 1] = rgba.green;\n            outData[outIndex + 2] = rgba.blue;\n            if (outHasAlpha) {\n              outData[outIndex + 3] = rgba.alpha;\n            }\n          } else {\n            outData.writeUInt16BE(rgba.red, outIndex);\n            outData.writeUInt16BE(rgba.green, outIndex + 2);\n            outData.writeUInt16BE(rgba.blue, outIndex + 4);\n            if (outHasAlpha) {\n              outData.writeUInt16BE(rgba.alpha, outIndex + 6);\n            }\n          }\n          break;\n        case constants.COLORTYPE_ALPHA:\n        case constants.COLORTYPE_GRAYSCALE: {\n          // Convert to grayscale and alpha\n          let grayscale = (rgba.red + rgba.green + rgba.blue) / 3;\n          if (options.bitDepth === 8) {\n            outData[outIndex] = grayscale;\n            if (outHasAlpha) {\n              outData[outIndex + 1] = rgba.alpha;\n            }\n          } else {\n            outData.writeUInt16BE(grayscale, outIndex);\n            if (outHasAlpha) {\n              outData.writeUInt16BE(rgba.alpha, outIndex + 2);\n            }\n          }\n          break;\n        }\n        default:\n          throw new Error(\"unrecognised color Type \" + options.colorType);\n      }\n\n      inIndex += inBpp;\n      outIndex += outBpp;\n    }\n  }\n\n  return outData;\n};\n","\"use strict\";\n\nlet SyncReader = require(\"./sync-reader\");\nlet Filter = require(\"./filter-parse\");\n\nexports.process = function (inBuffer, bitmapInfo) {\n  let outBuffers = [];\n  let reader = new SyncReader(inBuffer);\n  let filter = new Filter(bitmapInfo, {\n    read: reader.read.bind(reader),\n    write: function (bufferPart) {\n      outBuffers.push(bufferPart);\n    },\n    complete: function () {},\n  });\n\n  filter.start();\n  reader.process();\n\n  return Buffer.concat(outBuffers);\n};\n","import * as vscode from 'vscode';\r\nimport { readPngMetadata, writePngWithMetadata } from './pngMetadata';\r\n\r\n/**\r\n * Provider for Drawmotive custom editor that handles .draw.png files\r\n */\r\nexport class DrawmotiveEditorProvider implements vscode.CustomTextEditorProvider {\r\n    private static readonly viewType = 'drawmotive.editor';\r\n\r\n    constructor(private readonly context: vscode.ExtensionContext) {}\r\n\r\n    public async resolveCustomTextEditor(\r\n        document: vscode.TextDocument,\r\n        webviewPanel: vscode.WebviewPanel,\r\n        _token: vscode.CancellationToken\r\n    ): Promise<void> {\r\n        // Setup webview\r\n        webviewPanel.webview.options = {\r\n            enableScripts: true,\r\n            localResourceRoots: [\r\n                vscode.Uri.joinPath(this.context.extensionUri, 'media')\r\n            ]\r\n        };\r\n\r\n        webviewPanel.webview.html = await this.getHtmlForWebview(webviewPanel.webview);\r\n\r\n        // Handle messages from webview\r\n        webviewPanel.webview.onDidReceiveMessage(\r\n            async (message) => {\r\n                switch (message.type) {\r\n                    case 'ready':\r\n                        await this.updateWebview(document, webviewPanel.webview);\r\n                        break;\r\n                    case 'update':\r\n                        await this.updateDocument(document, message.data);\r\n                        break;\r\n                    case 'error':\r\n                        vscode.window.showErrorMessage(`Drawmotive: ${message.error}`);\r\n                        break;\r\n                }\r\n            },\r\n            null,\r\n            this.context.subscriptions\r\n        );\r\n\r\n        // Update webview when document changes\r\n        const changeDocumentSubscription = vscode.workspace.onDidChangeTextDocument((e) => {\r\n            if (e.document.uri.toString() === document.uri.toString()) {\r\n                this.updateWebview(document, webviewPanel.webview);\r\n            }\r\n        });\r\n        webviewPanel.onDidDispose(() => {\r\n            changeDocumentSubscription.dispose();\r\n        });\r\n    }\r\n\r\n    private async updateWebview(document: vscode.TextDocument, webview: vscode.Webview): Promise<void> {\r\n        try {\r\n            const fileUri = document.uri;\r\n            const fileData = await vscode.workspace.fs.readFile(fileUri);\r\n\r\n            let diagramData = '';\r\n            if (fileData.length > 0) {\r\n                const metadata = await readPngMetadata(Buffer.from(fileData));\r\n                if (metadata) {\r\n                    diagramData = metadata;\r\n                }\r\n            }\r\n\r\n            webview.postMessage({\r\n                type: 'init',\r\n                data: {\r\n                    fileId: fileUri.fsPath,\r\n                    diagramData: diagramData,\r\n                    pngData: fileData.length > 0 ? Buffer.from(fileData).toString('base64') : ''\r\n                }\r\n            });\r\n        } catch (error) {\r\n            console.error('Error updating webview:', error);\r\n            webview.postMessage({\r\n                type: 'error',\r\n                error: `Failed to load diagram: ${error}`\r\n            });\r\n        }\r\n    }\r\n\r\n    private async updateDocument(document: vscode.TextDocument, data: any): Promise<void> {\r\n        try {\r\n            const { raw, png } = data;\r\n\r\n            if (!raw || !png) {\r\n                throw new Error('Missing required data fields (raw or png)');\r\n            }\r\n\r\n            const pngBuffer = Buffer.from(png, 'base64');\r\n            const finalPngBuffer = await writePngWithMetadata(pngBuffer, raw);\r\n\r\n            const edit = new vscode.WorkspaceEdit();\r\n            const fullRange = new vscode.Range(\r\n                document.positionAt(0),\r\n                document.positionAt(document.getText().length)\r\n            );\r\n\r\n            const base64Content = finalPngBuffer.toString('base64');\r\n            edit.replace(document.uri, fullRange, base64Content);\r\n\r\n            const success = await vscode.workspace.applyEdit(edit);\r\n            if (!success) {\r\n                throw new Error('Failed to apply edit to document');\r\n            }\r\n\r\n            await document.save();\r\n        } catch (error) {\r\n            console.error('Error updating document:', error);\r\n            vscode.window.showErrorMessage(`Failed to save diagram: ${error}`);\r\n        }\r\n    }\r\n\r\n    private async getHtmlForWebview(webview: vscode.Webview): Promise<string> {\r\n        const indexPath = vscode.Uri.joinPath(this.context.extensionUri, 'media', 'editor', 'index.html');\r\n        const indexBytes = await vscode.workspace.fs.readFile(indexPath);\r\n        let html = Buffer.from(indexBytes).toString('utf8');\r\n\r\n        const editorUri = webview.asWebviewUri(\r\n            vscode.Uri.joinPath(this.context.extensionUri, 'media', 'editor')\r\n        );\r\n\r\n        // Convert relative paths to absolute webview URIs\r\n        html = html.replace(/href=\"([^\"]+)\"/g, (match, path) => {\r\n            if (path.startsWith('http')) return match;\r\n            return `href=\"${editorUri}/${path}\"`;\r\n        });\r\n\r\n        html = html.replace(/src=\"([^\"]+)\"/g, (match, path) => {\r\n            if (path.startsWith('http')) return match;\r\n            return `src=\"${editorUri}/${path}\"`;\r\n        });\r\n\r\n        // Add CSP\r\n        html = html.replace('<head>', `<head>\r\n    <meta http-equiv=\"Content-Security-Policy\" content=\"\r\n        default-src 'none';\r\n        script-src ${webview.cspSource} 'unsafe-eval' 'unsafe-inline' 'wasm-unsafe-eval';\r\n        script-src-elem ${webview.cspSource} 'unsafe-inline';\r\n        style-src ${webview.cspSource} 'unsafe-inline';\r\n        img-src ${webview.cspSource} data: blob:;\r\n        font-src ${webview.cspSource};\r\n        connect-src ${webview.cspSource} http://localhost data: blob:;\r\n        worker-src ${webview.cspSource} blob:;\r\n        child-src ${webview.cspSource} blob:;\r\n    \">`);\r\n\r\n        return html;\r\n    }\r\n}\r\n","\"use strict\";\n\nlet constants = require(\"./constants\");\nlet CrcCalculator = require(\"./crc\");\n\nlet Parser = (module.exports = function (options, dependencies) {\n  this._options = options;\n  options.checkCRC = options.checkCRC !== false;\n\n  this._hasIHDR = false;\n  this._hasIEND = false;\n  this._emittedHeadersFinished = false;\n\n  // input flags/metadata\n  this._palette = [];\n  this._colorType = 0;\n\n  this._chunks = {};\n  this._chunks[constants.TYPE_IHDR] = this._handleIHDR.bind(this);\n  this._chunks[constants.TYPE_IEND] = this._handleIEND.bind(this);\n  this._chunks[constants.TYPE_IDAT] = this._handleIDAT.bind(this);\n  this._chunks[constants.TYPE_PLTE] = this._handlePLTE.bind(this);\n  this._chunks[constants.TYPE_tRNS] = this._handleTRNS.bind(this);\n  this._chunks[constants.TYPE_gAMA] = this._handleGAMA.bind(this);\n\n  this.read = dependencies.read;\n  this.error = dependencies.error;\n  this.metadata = dependencies.metadata;\n  this.gamma = dependencies.gamma;\n  this.transColor = dependencies.transColor;\n  this.palette = dependencies.palette;\n  this.parsed = dependencies.parsed;\n  this.inflateData = dependencies.inflateData;\n  this.finished = dependencies.finished;\n  this.simpleTransparency = dependencies.simpleTransparency;\n  this.headersFinished = dependencies.headersFinished || function () {};\n});\n\nParser.prototype.start = function () {\n  this.read(constants.PNG_SIGNATURE.length, this._parseSignature.bind(this));\n};\n\nParser.prototype._parseSignature = function (data) {\n  let signature = constants.PNG_SIGNATURE;\n\n  for (let i = 0; i < signature.length; i++) {\n    if (data[i] !== signature[i]) {\n      this.error(new Error(\"Invalid file signature\"));\n      return;\n    }\n  }\n  this.read(8, this._parseChunkBegin.bind(this));\n};\n\nParser.prototype._parseChunkBegin = function (data) {\n  // chunk content length\n  let length = data.readUInt32BE(0);\n\n  // chunk type\n  let type = data.readUInt32BE(4);\n  let name = \"\";\n  for (let i = 4; i < 8; i++) {\n    name += String.fromCharCode(data[i]);\n  }\n\n  //console.log('chunk ', name, length);\n\n  // chunk flags\n  let ancillary = Boolean(data[4] & 0x20); // or critical\n  //    priv = Boolean(data[5] & 0x20), // or public\n  //    safeToCopy = Boolean(data[7] & 0x20); // or unsafe\n\n  if (!this._hasIHDR && type !== constants.TYPE_IHDR) {\n    this.error(new Error(\"Expected IHDR on beggining\"));\n    return;\n  }\n\n  this._crc = new CrcCalculator();\n  this._crc.write(Buffer.from(name));\n\n  if (this._chunks[type]) {\n    return this._chunks[type](length);\n  }\n\n  if (!ancillary) {\n    this.error(new Error(\"Unsupported critical chunk type \" + name));\n    return;\n  }\n\n  this.read(length + 4, this._skipChunk.bind(this));\n};\n\nParser.prototype._skipChunk = function (/*data*/) {\n  this.read(8, this._parseChunkBegin.bind(this));\n};\n\nParser.prototype._handleChunkEnd = function () {\n  this.read(4, this._parseChunkEnd.bind(this));\n};\n\nParser.prototype._parseChunkEnd = function (data) {\n  let fileCrc = data.readInt32BE(0);\n  let calcCrc = this._crc.crc32();\n\n  // check CRC\n  if (this._options.checkCRC && calcCrc !== fileCrc) {\n    this.error(new Error(\"Crc error - \" + fileCrc + \" - \" + calcCrc));\n    return;\n  }\n\n  if (!this._hasIEND) {\n    this.read(8, this._parseChunkBegin.bind(this));\n  }\n};\n\nParser.prototype._handleIHDR = function (length) {\n  this.read(length, this._parseIHDR.bind(this));\n};\nParser.prototype._parseIHDR = function (data) {\n  this._crc.write(data);\n\n  let width = data.readUInt32BE(0);\n  let height = data.readUInt32BE(4);\n  let depth = data[8];\n  let colorType = data[9]; // bits: 1 palette, 2 color, 4 alpha\n  let compr = data[10];\n  let filter = data[11];\n  let interlace = data[12];\n\n  // console.log('    width', width, 'height', height,\n  //     'depth', depth, 'colorType', colorType,\n  //     'compr', compr, 'filter', filter, 'interlace', interlace\n  // );\n\n  if (\n    depth !== 8 &&\n    depth !== 4 &&\n    depth !== 2 &&\n    depth !== 1 &&\n    depth !== 16\n  ) {\n    this.error(new Error(\"Unsupported bit depth \" + depth));\n    return;\n  }\n  if (!(colorType in constants.COLORTYPE_TO_BPP_MAP)) {\n    this.error(new Error(\"Unsupported color type\"));\n    return;\n  }\n  if (compr !== 0) {\n    this.error(new Error(\"Unsupported compression method\"));\n    return;\n  }\n  if (filter !== 0) {\n    this.error(new Error(\"Unsupported filter method\"));\n    return;\n  }\n  if (interlace !== 0 && interlace !== 1) {\n    this.error(new Error(\"Unsupported interlace method\"));\n    return;\n  }\n\n  this._colorType = colorType;\n\n  let bpp = constants.COLORTYPE_TO_BPP_MAP[this._colorType];\n\n  this._hasIHDR = true;\n\n  this.metadata({\n    width: width,\n    height: height,\n    depth: depth,\n    interlace: Boolean(interlace),\n    palette: Boolean(colorType & constants.COLORTYPE_PALETTE),\n    color: Boolean(colorType & constants.COLORTYPE_COLOR),\n    alpha: Boolean(colorType & constants.COLORTYPE_ALPHA),\n    bpp: bpp,\n    colorType: colorType,\n  });\n\n  this._handleChunkEnd();\n};\n\nParser.prototype._handlePLTE = function (length) {\n  this.read(length, this._parsePLTE.bind(this));\n};\nParser.prototype._parsePLTE = function (data) {\n  this._crc.write(data);\n\n  let entries = Math.floor(data.length / 3);\n  // console.log('Palette:', entries);\n\n  for (let i = 0; i < entries; i++) {\n    this._palette.push([data[i * 3], data[i * 3 + 1], data[i * 3 + 2], 0xff]);\n  }\n\n  this.palette(this._palette);\n\n  this._handleChunkEnd();\n};\n\nParser.prototype._handleTRNS = function (length) {\n  this.simpleTransparency();\n  this.read(length, this._parseTRNS.bind(this));\n};\nParser.prototype._parseTRNS = function (data) {\n  this._crc.write(data);\n\n  // palette\n  if (this._colorType === constants.COLORTYPE_PALETTE_COLOR) {\n    if (this._palette.length === 0) {\n      this.error(new Error(\"Transparency chunk must be after palette\"));\n      return;\n    }\n    if (data.length > this._palette.length) {\n      this.error(new Error(\"More transparent colors than palette size\"));\n      return;\n    }\n    for (let i = 0; i < data.length; i++) {\n      this._palette[i][3] = data[i];\n    }\n    this.palette(this._palette);\n  }\n\n  // for colorType 0 (grayscale) and 2 (rgb)\n  // there might be one gray/color defined as transparent\n  if (this._colorType === constants.COLORTYPE_GRAYSCALE) {\n    // grey, 2 bytes\n    this.transColor([data.readUInt16BE(0)]);\n  }\n  if (this._colorType === constants.COLORTYPE_COLOR) {\n    this.transColor([\n      data.readUInt16BE(0),\n      data.readUInt16BE(2),\n      data.readUInt16BE(4),\n    ]);\n  }\n\n  this._handleChunkEnd();\n};\n\nParser.prototype._handleGAMA = function (length) {\n  this.read(length, this._parseGAMA.bind(this));\n};\nParser.prototype._parseGAMA = function (data) {\n  this._crc.write(data);\n  this.gamma(data.readUInt32BE(0) / constants.GAMMA_DIVISION);\n\n  this._handleChunkEnd();\n};\n\nParser.prototype._handleIDAT = function (length) {\n  if (!this._emittedHeadersFinished) {\n    this._emittedHeadersFinished = true;\n    this.headersFinished();\n  }\n  this.read(-length, this._parseIDAT.bind(this, length));\n};\nParser.prototype._parseIDAT = function (length, data) {\n  this._crc.write(data);\n\n  if (\n    this._colorType === constants.COLORTYPE_PALETTE_COLOR &&\n    this._palette.length === 0\n  ) {\n    throw new Error(\"Expected palette not found\");\n  }\n\n  this.inflateData(data);\n  let leftOverLength = length - data.length;\n\n  if (leftOverLength > 0) {\n    this._handleIDAT(leftOverLength);\n  } else {\n    this._handleChunkEnd();\n  }\n};\n\nParser.prototype._handleIEND = function (length) {\n  this.read(length, this._parseIEND.bind(this));\n};\nParser.prototype._parseIEND = function (data) {\n  this._crc.write(data);\n\n  this._hasIEND = true;\n  this._handleChunkEnd();\n\n  if (this.finished) {\n    this.finished();\n  }\n};\n","module.exports = require(\"vscode\");","\"use strict\";\n\nlet util = require(\"util\");\nlet ChunkStream = require(\"./chunkstream\");\nlet Filter = require(\"./filter-parse\");\n\nlet FilterAsync = (module.exports = function (bitmapInfo) {\n  ChunkStream.call(this);\n\n  let buffers = [];\n  let that = this;\n  this._filter = new Filter(bitmapInfo, {\n    read: this.read.bind(this),\n    write: function (buffer) {\n      buffers.push(buffer);\n    },\n    complete: function () {\n      that.emit(\"complete\", Buffer.concat(buffers));\n    },\n  });\n\n  this._filter.start();\n});\nutil.inherits(FilterAsync, ChunkStream);\n","\"use strict\";\n\nlet util = require(\"util\");\nlet zlib = require(\"zlib\");\nlet ChunkStream = require(\"./chunkstream\");\nlet FilterAsync = require(\"./filter-parse-async\");\nlet Parser = require(\"./parser\");\nlet bitmapper = require(\"./bitmapper\");\nlet formatNormaliser = require(\"./format-normaliser\");\n\nlet ParserAsync = (module.exports = function (options) {\n  ChunkStream.call(this);\n\n  this._parser = new Parser(options, {\n    read: this.read.bind(this),\n    error: this._handleError.bind(this),\n    metadata: this._handleMetaData.bind(this),\n    gamma: this.emit.bind(this, \"gamma\"),\n    palette: this._handlePalette.bind(this),\n    transColor: this._handleTransColor.bind(this),\n    finished: this._finished.bind(this),\n    inflateData: this._inflateData.bind(this),\n    simpleTransparency: this._simpleTransparency.bind(this),\n    headersFinished: this._headersFinished.bind(this),\n  });\n  this._options = options;\n  this.writable = true;\n\n  this._parser.start();\n});\nutil.inherits(ParserAsync, ChunkStream);\n\nParserAsync.prototype._handleError = function (err) {\n  this.emit(\"error\", err);\n\n  this.writable = false;\n\n  this.destroy();\n\n  if (this._inflate && this._inflate.destroy) {\n    this._inflate.destroy();\n  }\n\n  if (this._filter) {\n    this._filter.destroy();\n    // For backward compatibility with Node 7 and below.\n    // Suppress errors due to _inflate calling write() even after\n    // it's destroy()'ed.\n    this._filter.on(\"error\", function () {});\n  }\n\n  this.errord = true;\n};\n\nParserAsync.prototype._inflateData = function (data) {\n  if (!this._inflate) {\n    if (this._bitmapInfo.interlace) {\n      this._inflate = zlib.createInflate();\n\n      this._inflate.on(\"error\", this.emit.bind(this, \"error\"));\n      this._filter.on(\"complete\", this._complete.bind(this));\n\n      this._inflate.pipe(this._filter);\n    } else {\n      let rowSize =\n        ((this._bitmapInfo.width *\n          this._bitmapInfo.bpp *\n          this._bitmapInfo.depth +\n          7) >>\n          3) +\n        1;\n      let imageSize = rowSize * this._bitmapInfo.height;\n      let chunkSize = Math.max(imageSize, zlib.Z_MIN_CHUNK);\n\n      this._inflate = zlib.createInflate({ chunkSize: chunkSize });\n      let leftToInflate = imageSize;\n\n      let emitError = this.emit.bind(this, \"error\");\n      this._inflate.on(\"error\", function (err) {\n        if (!leftToInflate) {\n          return;\n        }\n\n        emitError(err);\n      });\n      this._filter.on(\"complete\", this._complete.bind(this));\n\n      let filterWrite = this._filter.write.bind(this._filter);\n      this._inflate.on(\"data\", function (chunk) {\n        if (!leftToInflate) {\n          return;\n        }\n\n        if (chunk.length > leftToInflate) {\n          chunk = chunk.slice(0, leftToInflate);\n        }\n\n        leftToInflate -= chunk.length;\n\n        filterWrite(chunk);\n      });\n\n      this._inflate.on(\"end\", this._filter.end.bind(this._filter));\n    }\n  }\n  this._inflate.write(data);\n};\n\nParserAsync.prototype._handleMetaData = function (metaData) {\n  this._metaData = metaData;\n  this._bitmapInfo = Object.create(metaData);\n\n  this._filter = new FilterAsync(this._bitmapInfo);\n};\n\nParserAsync.prototype._handleTransColor = function (transColor) {\n  this._bitmapInfo.transColor = transColor;\n};\n\nParserAsync.prototype._handlePalette = function (palette) {\n  this._bitmapInfo.palette = palette;\n};\n\nParserAsync.prototype._simpleTransparency = function () {\n  this._metaData.alpha = true;\n};\n\nParserAsync.prototype._headersFinished = function () {\n  // Up until this point, we don't know if we have a tRNS chunk (alpha)\n  // so we can't emit metadata any earlier\n  this.emit(\"metadata\", this._metaData);\n};\n\nParserAsync.prototype._finished = function () {\n  if (this.errord) {\n    return;\n  }\n\n  if (!this._inflate) {\n    this.emit(\"error\", \"No Inflate block\");\n  } else {\n    // no more data to inflate\n    this._inflate.end();\n  }\n};\n\nParserAsync.prototype._complete = function (filteredData) {\n  if (this.errord) {\n    return;\n  }\n\n  let normalisedBitmapData;\n\n  try {\n    let bitmapData = bitmapper.dataToBitMap(filteredData, this._bitmapInfo);\n\n    normalisedBitmapData = formatNormaliser(\n      bitmapData,\n      this._bitmapInfo,\n      this._options.skipRescale\n    );\n    bitmapData = null;\n  } catch (ex) {\n    this._handleError(ex);\n    return;\n  }\n\n  this.emit(\"parsed\", normalisedBitmapData);\n};\n","\"use strict\";\n\nlet interlaceUtils = require(\"./interlace\");\nlet paethPredictor = require(\"./paeth-predictor\");\n\nfunction getByteWidth(width, bpp, depth) {\n  let byteWidth = width * bpp;\n  if (depth !== 8) {\n    byteWidth = Math.ceil(byteWidth / (8 / depth));\n  }\n  return byteWidth;\n}\n\nlet Filter = (module.exports = function (bitmapInfo, dependencies) {\n  let width = bitmapInfo.width;\n  let height = bitmapInfo.height;\n  let interlace = bitmapInfo.interlace;\n  let bpp = bitmapInfo.bpp;\n  let depth = bitmapInfo.depth;\n\n  this.read = dependencies.read;\n  this.write = dependencies.write;\n  this.complete = dependencies.complete;\n\n  this._imageIndex = 0;\n  this._images = [];\n  if (interlace) {\n    let passes = interlaceUtils.getImagePasses(width, height);\n    for (let i = 0; i < passes.length; i++) {\n      this._images.push({\n        byteWidth: getByteWidth(passes[i].width, bpp, depth),\n        height: passes[i].height,\n        lineIndex: 0,\n      });\n    }\n  } else {\n    this._images.push({\n      byteWidth: getByteWidth(width, bpp, depth),\n      height: height,\n      lineIndex: 0,\n    });\n  }\n\n  // when filtering the line we look at the pixel to the left\n  // the spec also says it is done on a byte level regardless of the number of pixels\n  // so if the depth is byte compatible (8 or 16) we subtract the bpp in order to compare back\n  // a pixel rather than just a different byte part. However if we are sub byte, we ignore.\n  if (depth === 8) {\n    this._xComparison = bpp;\n  } else if (depth === 16) {\n    this._xComparison = bpp * 2;\n  } else {\n    this._xComparison = 1;\n  }\n});\n\nFilter.prototype.start = function () {\n  this.read(\n    this._images[this._imageIndex].byteWidth + 1,\n    this._reverseFilterLine.bind(this)\n  );\n};\n\nFilter.prototype._unFilterType1 = function (\n  rawData,\n  unfilteredLine,\n  byteWidth\n) {\n  let xComparison = this._xComparison;\n  let xBiggerThan = xComparison - 1;\n\n  for (let x = 0; x < byteWidth; x++) {\n    let rawByte = rawData[1 + x];\n    let f1Left = x > xBiggerThan ? unfilteredLine[x - xComparison] : 0;\n    unfilteredLine[x] = rawByte + f1Left;\n  }\n};\n\nFilter.prototype._unFilterType2 = function (\n  rawData,\n  unfilteredLine,\n  byteWidth\n) {\n  let lastLine = this._lastLine;\n\n  for (let x = 0; x < byteWidth; x++) {\n    let rawByte = rawData[1 + x];\n    let f2Up = lastLine ? lastLine[x] : 0;\n    unfilteredLine[x] = rawByte + f2Up;\n  }\n};\n\nFilter.prototype._unFilterType3 = function (\n  rawData,\n  unfilteredLine,\n  byteWidth\n) {\n  let xComparison = this._xComparison;\n  let xBiggerThan = xComparison - 1;\n  let lastLine = this._lastLine;\n\n  for (let x = 0; x < byteWidth; x++) {\n    let rawByte = rawData[1 + x];\n    let f3Up = lastLine ? lastLine[x] : 0;\n    let f3Left = x > xBiggerThan ? unfilteredLine[x - xComparison] : 0;\n    let f3Add = Math.floor((f3Left + f3Up) / 2);\n    unfilteredLine[x] = rawByte + f3Add;\n  }\n};\n\nFilter.prototype._unFilterType4 = function (\n  rawData,\n  unfilteredLine,\n  byteWidth\n) {\n  let xComparison = this._xComparison;\n  let xBiggerThan = xComparison - 1;\n  let lastLine = this._lastLine;\n\n  for (let x = 0; x < byteWidth; x++) {\n    let rawByte = rawData[1 + x];\n    let f4Up = lastLine ? lastLine[x] : 0;\n    let f4Left = x > xBiggerThan ? unfilteredLine[x - xComparison] : 0;\n    let f4UpLeft = x > xBiggerThan && lastLine ? lastLine[x - xComparison] : 0;\n    let f4Add = paethPredictor(f4Left, f4Up, f4UpLeft);\n    unfilteredLine[x] = rawByte + f4Add;\n  }\n};\n\nFilter.prototype._reverseFilterLine = function (rawData) {\n  let filter = rawData[0];\n  let unfilteredLine;\n  let currentImage = this._images[this._imageIndex];\n  let byteWidth = currentImage.byteWidth;\n\n  if (filter === 0) {\n    unfilteredLine = rawData.slice(1, byteWidth + 1);\n  } else {\n    unfilteredLine = Buffer.alloc(byteWidth);\n\n    switch (filter) {\n      case 1:\n        this._unFilterType1(rawData, unfilteredLine, byteWidth);\n        break;\n      case 2:\n        this._unFilterType2(rawData, unfilteredLine, byteWidth);\n        break;\n      case 3:\n        this._unFilterType3(rawData, unfilteredLine, byteWidth);\n        break;\n      case 4:\n        this._unFilterType4(rawData, unfilteredLine, byteWidth);\n        break;\n      default:\n        throw new Error(\"Unrecognised filter type - \" + filter);\n    }\n  }\n\n  this.write(unfilteredLine);\n\n  currentImage.lineIndex++;\n  if (currentImage.lineIndex >= currentImage.height) {\n    this._lastLine = null;\n    this._imageIndex++;\n    currentImage = this._images[this._imageIndex];\n  } else {\n    this._lastLine = unfilteredLine;\n  }\n\n  if (currentImage) {\n    // read, using the byte width that may be from the new current image\n    this.read(currentImage.byteWidth + 1, this._reverseFilterLine.bind(this));\n  } else {\n    this._lastLine = null;\n    this.complete();\n  }\n};\n","module.exports = require(\"assert\");","\"use strict\";\n\nlet parse = require(\"./parser-sync\");\nlet pack = require(\"./packer-sync\");\n\nexports.read = function (buffer, options) {\n  return parse(buffer, options || {});\n};\n\nexports.write = function (png, options) {\n  return pack(png, options);\n};\n","\"use strict\";\n\nmodule.exports = {\n  PNG_SIGNATURE: [0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a],\n\n  TYPE_IHDR: 0x49484452,\n  TYPE_IEND: 0x49454e44,\n  TYPE_IDAT: 0x49444154,\n  TYPE_PLTE: 0x504c5445,\n  TYPE_tRNS: 0x74524e53, // eslint-disable-line camelcase\n  TYPE_gAMA: 0x67414d41, // eslint-disable-line camelcase\n\n  // color-type bits\n  COLORTYPE_GRAYSCALE: 0,\n  COLORTYPE_PALETTE: 1,\n  COLORTYPE_COLOR: 2,\n  COLORTYPE_ALPHA: 4, // e.g. grayscale and alpha\n\n  // color-type combinations\n  COLORTYPE_PALETTE_COLOR: 3,\n  COLORTYPE_COLOR_ALPHA: 6,\n\n  COLORTYPE_TO_BPP_MAP: {\n    0: 1,\n    2: 3,\n    3: 1,\n    4: 2,\n    6: 4,\n  },\n\n  GAMMA_DIVISION: 100000,\n};\n","\"use strict\";\n\nlet interlaceUtils = require(\"./interlace\");\n\nlet pixelBppMapper = [\n  // 0 - dummy entry\n  function () {},\n\n  // 1 - L\n  // 0: 0, 1: 0, 2: 0, 3: 0xff\n  function (pxData, data, pxPos, rawPos) {\n    if (rawPos === data.length) {\n      throw new Error(\"Ran out of data\");\n    }\n\n    let pixel = data[rawPos];\n    pxData[pxPos] = pixel;\n    pxData[pxPos + 1] = pixel;\n    pxData[pxPos + 2] = pixel;\n    pxData[pxPos + 3] = 0xff;\n  },\n\n  // 2 - LA\n  // 0: 0, 1: 0, 2: 0, 3: 1\n  function (pxData, data, pxPos, rawPos) {\n    if (rawPos + 1 >= data.length) {\n      throw new Error(\"Ran out of data\");\n    }\n\n    let pixel = data[rawPos];\n    pxData[pxPos] = pixel;\n    pxData[pxPos + 1] = pixel;\n    pxData[pxPos + 2] = pixel;\n    pxData[pxPos + 3] = data[rawPos + 1];\n  },\n\n  // 3 - RGB\n  // 0: 0, 1: 1, 2: 2, 3: 0xff\n  function (pxData, data, pxPos, rawPos) {\n    if (rawPos + 2 >= data.length) {\n      throw new Error(\"Ran out of data\");\n    }\n\n    pxData[pxPos] = data[rawPos];\n    pxData[pxPos + 1] = data[rawPos + 1];\n    pxData[pxPos + 2] = data[rawPos + 2];\n    pxData[pxPos + 3] = 0xff;\n  },\n\n  // 4 - RGBA\n  // 0: 0, 1: 1, 2: 2, 3: 3\n  function (pxData, data, pxPos, rawPos) {\n    if (rawPos + 3 >= data.length) {\n      throw new Error(\"Ran out of data\");\n    }\n\n    pxData[pxPos] = data[rawPos];\n    pxData[pxPos + 1] = data[rawPos + 1];\n    pxData[pxPos + 2] = data[rawPos + 2];\n    pxData[pxPos + 3] = data[rawPos + 3];\n  },\n];\n\nlet pixelBppCustomMapper = [\n  // 0 - dummy entry\n  function () {},\n\n  // 1 - L\n  // 0: 0, 1: 0, 2: 0, 3: 0xff\n  function (pxData, pixelData, pxPos, maxBit) {\n    let pixel = pixelData[0];\n    pxData[pxPos] = pixel;\n    pxData[pxPos + 1] = pixel;\n    pxData[pxPos + 2] = pixel;\n    pxData[pxPos + 3] = maxBit;\n  },\n\n  // 2 - LA\n  // 0: 0, 1: 0, 2: 0, 3: 1\n  function (pxData, pixelData, pxPos) {\n    let pixel = pixelData[0];\n    pxData[pxPos] = pixel;\n    pxData[pxPos + 1] = pixel;\n    pxData[pxPos + 2] = pixel;\n    pxData[pxPos + 3] = pixelData[1];\n  },\n\n  // 3 - RGB\n  // 0: 0, 1: 1, 2: 2, 3: 0xff\n  function (pxData, pixelData, pxPos, maxBit) {\n    pxData[pxPos] = pixelData[0];\n    pxData[pxPos + 1] = pixelData[1];\n    pxData[pxPos + 2] = pixelData[2];\n    pxData[pxPos + 3] = maxBit;\n  },\n\n  // 4 - RGBA\n  // 0: 0, 1: 1, 2: 2, 3: 3\n  function (pxData, pixelData, pxPos) {\n    pxData[pxPos] = pixelData[0];\n    pxData[pxPos + 1] = pixelData[1];\n    pxData[pxPos + 2] = pixelData[2];\n    pxData[pxPos + 3] = pixelData[3];\n  },\n];\n\nfunction bitRetriever(data, depth) {\n  let leftOver = [];\n  let i = 0;\n\n  function split() {\n    if (i === data.length) {\n      throw new Error(\"Ran out of data\");\n    }\n    let byte = data[i];\n    i++;\n    let byte8, byte7, byte6, byte5, byte4, byte3, byte2, byte1;\n    switch (depth) {\n      default:\n        throw new Error(\"unrecognised depth\");\n      case 16:\n        byte2 = data[i];\n        i++;\n        leftOver.push((byte << 8) + byte2);\n        break;\n      case 4:\n        byte2 = byte & 0x0f;\n        byte1 = byte >> 4;\n        leftOver.push(byte1, byte2);\n        break;\n      case 2:\n        byte4 = byte & 3;\n        byte3 = (byte >> 2) & 3;\n        byte2 = (byte >> 4) & 3;\n        byte1 = (byte >> 6) & 3;\n        leftOver.push(byte1, byte2, byte3, byte4);\n        break;\n      case 1:\n        byte8 = byte & 1;\n        byte7 = (byte >> 1) & 1;\n        byte6 = (byte >> 2) & 1;\n        byte5 = (byte >> 3) & 1;\n        byte4 = (byte >> 4) & 1;\n        byte3 = (byte >> 5) & 1;\n        byte2 = (byte >> 6) & 1;\n        byte1 = (byte >> 7) & 1;\n        leftOver.push(byte1, byte2, byte3, byte4, byte5, byte6, byte7, byte8);\n        break;\n    }\n  }\n\n  return {\n    get: function (count) {\n      while (leftOver.length < count) {\n        split();\n      }\n      let returner = leftOver.slice(0, count);\n      leftOver = leftOver.slice(count);\n      return returner;\n    },\n    resetAfterLine: function () {\n      leftOver.length = 0;\n    },\n    end: function () {\n      if (i !== data.length) {\n        throw new Error(\"extra data found\");\n      }\n    },\n  };\n}\n\nfunction mapImage8Bit(image, pxData, getPxPos, bpp, data, rawPos) {\n  // eslint-disable-line max-params\n  let imageWidth = image.width;\n  let imageHeight = image.height;\n  let imagePass = image.index;\n  for (let y = 0; y < imageHeight; y++) {\n    for (let x = 0; x < imageWidth; x++) {\n      let pxPos = getPxPos(x, y, imagePass);\n      pixelBppMapper[bpp](pxData, data, pxPos, rawPos);\n      rawPos += bpp; //eslint-disable-line no-param-reassign\n    }\n  }\n  return rawPos;\n}\n\nfunction mapImageCustomBit(image, pxData, getPxPos, bpp, bits, maxBit) {\n  // eslint-disable-line max-params\n  let imageWidth = image.width;\n  let imageHeight = image.height;\n  let imagePass = image.index;\n  for (let y = 0; y < imageHeight; y++) {\n    for (let x = 0; x < imageWidth; x++) {\n      let pixelData = bits.get(bpp);\n      let pxPos = getPxPos(x, y, imagePass);\n      pixelBppCustomMapper[bpp](pxData, pixelData, pxPos, maxBit);\n    }\n    bits.resetAfterLine();\n  }\n}\n\nexports.dataToBitMap = function (data, bitmapInfo) {\n  let width = bitmapInfo.width;\n  let height = bitmapInfo.height;\n  let depth = bitmapInfo.depth;\n  let bpp = bitmapInfo.bpp;\n  let interlace = bitmapInfo.interlace;\n  let bits;\n\n  if (depth !== 8) {\n    bits = bitRetriever(data, depth);\n  }\n  let pxData;\n  if (depth <= 8) {\n    pxData = Buffer.alloc(width * height * 4);\n  } else {\n    pxData = new Uint16Array(width * height * 4);\n  }\n  let maxBit = Math.pow(2, depth) - 1;\n  let rawPos = 0;\n  let images;\n  let getPxPos;\n\n  if (interlace) {\n    images = interlaceUtils.getImagePasses(width, height);\n    getPxPos = interlaceUtils.getInterlaceIterator(width, height);\n  } else {\n    let nonInterlacedPxPos = 0;\n    getPxPos = function () {\n      let returner = nonInterlacedPxPos;\n      nonInterlacedPxPos += 4;\n      return returner;\n    };\n    images = [{ width: width, height: height }];\n  }\n\n  for (let imageIndex = 0; imageIndex < images.length; imageIndex++) {\n    if (depth === 8) {\n      rawPos = mapImage8Bit(\n        images[imageIndex],\n        pxData,\n        getPxPos,\n        bpp,\n        data,\n        rawPos\n      );\n    } else {\n      mapImageCustomBit(\n        images[imageIndex],\n        pxData,\n        getPxPos,\n        bpp,\n        bits,\n        maxBit\n      );\n    }\n  }\n  if (depth === 8) {\n    if (rawPos !== data.length) {\n      throw new Error(\"extra data found\");\n    }\n  } else {\n    bits.end();\n  }\n\n  return pxData;\n};\n","\"use strict\";\n\n// Adam 7\n//   0 1 2 3 4 5 6 7\n// 0 x 6 4 6 x 6 4 6\n// 1 7 7 7 7 7 7 7 7\n// 2 5 6 5 6 5 6 5 6\n// 3 7 7 7 7 7 7 7 7\n// 4 3 6 4 6 3 6 4 6\n// 5 7 7 7 7 7 7 7 7\n// 6 5 6 5 6 5 6 5 6\n// 7 7 7 7 7 7 7 7 7\n\nlet imagePasses = [\n  {\n    // pass 1 - 1px\n    x: [0],\n    y: [0],\n  },\n  {\n    // pass 2 - 1px\n    x: [4],\n    y: [0],\n  },\n  {\n    // pass 3 - 2px\n    x: [0, 4],\n    y: [4],\n  },\n  {\n    // pass 4 - 4px\n    x: [2, 6],\n    y: [0, 4],\n  },\n  {\n    // pass 5 - 8px\n    x: [0, 2, 4, 6],\n    y: [2, 6],\n  },\n  {\n    // pass 6 - 16px\n    x: [1, 3, 5, 7],\n    y: [0, 2, 4, 6],\n  },\n  {\n    // pass 7 - 32px\n    x: [0, 1, 2, 3, 4, 5, 6, 7],\n    y: [1, 3, 5, 7],\n  },\n];\n\nexports.getImagePasses = function (width, height) {\n  let images = [];\n  let xLeftOver = width % 8;\n  let yLeftOver = height % 8;\n  let xRepeats = (width - xLeftOver) / 8;\n  let yRepeats = (height - yLeftOver) / 8;\n  for (let i = 0; i < imagePasses.length; i++) {\n    let pass = imagePasses[i];\n    let passWidth = xRepeats * pass.x.length;\n    let passHeight = yRepeats * pass.y.length;\n    for (let j = 0; j < pass.x.length; j++) {\n      if (pass.x[j] < xLeftOver) {\n        passWidth++;\n      } else {\n        break;\n      }\n    }\n    for (let j = 0; j < pass.y.length; j++) {\n      if (pass.y[j] < yLeftOver) {\n        passHeight++;\n      } else {\n        break;\n      }\n    }\n    if (passWidth > 0 && passHeight > 0) {\n      images.push({ width: passWidth, height: passHeight, index: i });\n    }\n  }\n  return images;\n};\n\nexports.getInterlaceIterator = function (width) {\n  return function (x, y, pass) {\n    let outerXLeftOver = x % imagePasses[pass].x.length;\n    let outerX =\n      ((x - outerXLeftOver) / imagePasses[pass].x.length) * 8 +\n      imagePasses[pass].x[outerXLeftOver];\n    let outerYLeftOver = y % imagePasses[pass].y.length;\n    let outerY =\n      ((y - outerYLeftOver) / imagePasses[pass].y.length) * 8 +\n      imagePasses[pass].y[outerYLeftOver];\n    return outerX * 4 + outerY * width * 4;\n  };\n};\n","import * as vscode from 'vscode';\r\nimport { DrawmotiveEditorProvider } from './DrawmotiveEditorProvider';\r\nimport { createEmptyPng } from './pngMetadata';\r\n\r\nexport function activate(context: vscode.ExtensionContext) {\r\n    console.log('Drawmotive extension activated');\r\n\r\n    // Register the custom editor provider for .draw.png files\r\n    const provider = new DrawmotiveEditorProvider(context);\r\n    const registration = vscode.window.registerCustomEditorProvider(\r\n        'drawmotive.editor',\r\n        provider,\r\n        {\r\n            webviewOptions: {\r\n                retainContextWhenHidden: true\r\n            },\r\n            supportsMultipleEditorsPerDocument: false\r\n        }\r\n    );\r\n    context.subscriptions.push(registration);\r\n\r\n    // Register command to create new drawing\r\n    const newDrawingCommand = vscode.commands.registerCommand('drawmotive.newDrawing', async () => {\r\n        const uri = await vscode.window.showSaveDialog({\r\n            filters: {\r\n                'Drawmotive Diagrams': ['draw.png']\r\n            },\r\n            saveLabel: 'Create Drawing'\r\n        });\r\n\r\n        if (uri) {\r\n            // Create a valid empty PNG file (not 0 bytes)\r\n            const emptyPngData = createEmptyPng();\r\n            await vscode.workspace.fs.writeFile(uri, emptyPngData);\r\n\r\n            // Open the newly created file in the editor\r\n            await vscode.commands.executeCommand('vscode.openWith', uri, 'drawmotive.editor');\r\n        }\r\n    });\r\n    context.subscriptions.push(newDrawingCommand);\r\n}\r\n\r\nexport function deactivate() {\r\n    console.log('Drawmotive extension deactivated');\r\n}\r\n","\"use strict\";\n\nlet paethPredictor = require(\"./paeth-predictor\");\n\nfunction filterNone(pxData, pxPos, byteWidth, rawData, rawPos) {\n  for (let x = 0; x < byteWidth; x++) {\n    rawData[rawPos + x] = pxData[pxPos + x];\n  }\n}\n\nfunction filterSumNone(pxData, pxPos, byteWidth) {\n  let sum = 0;\n  let length = pxPos + byteWidth;\n\n  for (let i = pxPos; i < length; i++) {\n    sum += Math.abs(pxData[i]);\n  }\n  return sum;\n}\n\nfunction filterSub(pxData, pxPos, byteWidth, rawData, rawPos, bpp) {\n  for (let x = 0; x < byteWidth; x++) {\n    let left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    let val = pxData[pxPos + x] - left;\n\n    rawData[rawPos + x] = val;\n  }\n}\n\nfunction filterSumSub(pxData, pxPos, byteWidth, bpp) {\n  let sum = 0;\n  for (let x = 0; x < byteWidth; x++) {\n    let left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    let val = pxData[pxPos + x] - left;\n\n    sum += Math.abs(val);\n  }\n\n  return sum;\n}\n\nfunction filterUp(pxData, pxPos, byteWidth, rawData, rawPos) {\n  for (let x = 0; x < byteWidth; x++) {\n    let up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    let val = pxData[pxPos + x] - up;\n\n    rawData[rawPos + x] = val;\n  }\n}\n\nfunction filterSumUp(pxData, pxPos, byteWidth) {\n  let sum = 0;\n  let length = pxPos + byteWidth;\n  for (let x = pxPos; x < length; x++) {\n    let up = pxPos > 0 ? pxData[x - byteWidth] : 0;\n    let val = pxData[x] - up;\n\n    sum += Math.abs(val);\n  }\n\n  return sum;\n}\n\nfunction filterAvg(pxData, pxPos, byteWidth, rawData, rawPos, bpp) {\n  for (let x = 0; x < byteWidth; x++) {\n    let left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    let up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    let val = pxData[pxPos + x] - ((left + up) >> 1);\n\n    rawData[rawPos + x] = val;\n  }\n}\n\nfunction filterSumAvg(pxData, pxPos, byteWidth, bpp) {\n  let sum = 0;\n  for (let x = 0; x < byteWidth; x++) {\n    let left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    let up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    let val = pxData[pxPos + x] - ((left + up) >> 1);\n\n    sum += Math.abs(val);\n  }\n\n  return sum;\n}\n\nfunction filterPaeth(pxData, pxPos, byteWidth, rawData, rawPos, bpp) {\n  for (let x = 0; x < byteWidth; x++) {\n    let left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    let up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    let upleft =\n      pxPos > 0 && x >= bpp ? pxData[pxPos + x - (byteWidth + bpp)] : 0;\n    let val = pxData[pxPos + x] - paethPredictor(left, up, upleft);\n\n    rawData[rawPos + x] = val;\n  }\n}\n\nfunction filterSumPaeth(pxData, pxPos, byteWidth, bpp) {\n  let sum = 0;\n  for (let x = 0; x < byteWidth; x++) {\n    let left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    let up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    let upleft =\n      pxPos > 0 && x >= bpp ? pxData[pxPos + x - (byteWidth + bpp)] : 0;\n    let val = pxData[pxPos + x] - paethPredictor(left, up, upleft);\n\n    sum += Math.abs(val);\n  }\n\n  return sum;\n}\n\nlet filters = {\n  0: filterNone,\n  1: filterSub,\n  2: filterUp,\n  3: filterAvg,\n  4: filterPaeth,\n};\n\nlet filterSums = {\n  0: filterSumNone,\n  1: filterSumSub,\n  2: filterSumUp,\n  3: filterSumAvg,\n  4: filterSumPaeth,\n};\n\nmodule.exports = function (pxData, width, height, options, bpp) {\n  let filterTypes;\n  if (!(\"filterType\" in options) || options.filterType === -1) {\n    filterTypes = [0, 1, 2, 3, 4];\n  } else if (typeof options.filterType === \"number\") {\n    filterTypes = [options.filterType];\n  } else {\n    throw new Error(\"unrecognised filter types\");\n  }\n\n  if (options.bitDepth === 16) {\n    bpp *= 2;\n  }\n  let byteWidth = width * bpp;\n  let rawPos = 0;\n  let pxPos = 0;\n  let rawData = Buffer.alloc((byteWidth + 1) * height);\n\n  let sel = filterTypes[0];\n\n  for (let y = 0; y < height; y++) {\n    if (filterTypes.length > 1) {\n      // find best filter for this line (with lowest sum of values)\n      let min = Infinity;\n\n      for (let i = 0; i < filterTypes.length; i++) {\n        let sum = filterSums[filterTypes[i]](pxData, pxPos, byteWidth, bpp);\n        if (sum < min) {\n          sel = filterTypes[i];\n          min = sum;\n        }\n      }\n    }\n\n    rawData[rawPos] = sel;\n    rawPos++;\n    filters[sel](pxData, pxPos, byteWidth, rawData, rawPos, bpp);\n    rawPos += byteWidth;\n    pxPos += byteWidth;\n  }\n  return rawData;\n};\n","\"use strict\";\n\nlet assert = require(\"assert\").ok;\nlet zlib = require(\"zlib\");\nlet util = require(\"util\");\n\nlet kMaxLength = require(\"buffer\").kMaxLength;\n\nfunction Inflate(opts) {\n  if (!(this instanceof Inflate)) {\n    return new Inflate(opts);\n  }\n\n  if (opts && opts.chunkSize < zlib.Z_MIN_CHUNK) {\n    opts.chunkSize = zlib.Z_MIN_CHUNK;\n  }\n\n  zlib.Inflate.call(this, opts);\n\n  // Node 8 --> 9 compatibility check\n  this._offset = this._offset === undefined ? this._outOffset : this._offset;\n  this._buffer = this._buffer || this._outBuffer;\n\n  if (opts && opts.maxLength != null) {\n    this._maxLength = opts.maxLength;\n  }\n}\n\nfunction createInflate(opts) {\n  return new Inflate(opts);\n}\n\nfunction _close(engine, callback) {\n  if (callback) {\n    process.nextTick(callback);\n  }\n\n  // Caller may invoke .close after a zlib error (which will null _handle).\n  if (!engine._handle) {\n    return;\n  }\n\n  engine._handle.close();\n  engine._handle = null;\n}\n\nInflate.prototype._processChunk = function (chunk, flushFlag, asyncCb) {\n  if (typeof asyncCb === \"function\") {\n    return zlib.Inflate._processChunk.call(this, chunk, flushFlag, asyncCb);\n  }\n\n  let self = this;\n\n  let availInBefore = chunk && chunk.length;\n  let availOutBefore = this._chunkSize - this._offset;\n  let leftToInflate = this._maxLength;\n  let inOff = 0;\n\n  let buffers = [];\n  let nread = 0;\n\n  let error;\n  this.on(\"error\", function (err) {\n    error = err;\n  });\n\n  function handleChunk(availInAfter, availOutAfter) {\n    if (self._hadError) {\n      return;\n    }\n\n    let have = availOutBefore - availOutAfter;\n    assert(have >= 0, \"have should not go down\");\n\n    if (have > 0) {\n      let out = self._buffer.slice(self._offset, self._offset + have);\n      self._offset += have;\n\n      if (out.length > leftToInflate) {\n        out = out.slice(0, leftToInflate);\n      }\n\n      buffers.push(out);\n      nread += out.length;\n      leftToInflate -= out.length;\n\n      if (leftToInflate === 0) {\n        return false;\n      }\n    }\n\n    if (availOutAfter === 0 || self._offset >= self._chunkSize) {\n      availOutBefore = self._chunkSize;\n      self._offset = 0;\n      self._buffer = Buffer.allocUnsafe(self._chunkSize);\n    }\n\n    if (availOutAfter === 0) {\n      inOff += availInBefore - availInAfter;\n      availInBefore = availInAfter;\n\n      return true;\n    }\n\n    return false;\n  }\n\n  assert(this._handle, \"zlib binding closed\");\n  let res;\n  do {\n    res = this._handle.writeSync(\n      flushFlag,\n      chunk, // in\n      inOff, // in_off\n      availInBefore, // in_len\n      this._buffer, // out\n      this._offset, //out_off\n      availOutBefore\n    ); // out_len\n    // Node 8 --> 9 compatibility check\n    res = res || this._writeState;\n  } while (!this._hadError && handleChunk(res[0], res[1]));\n\n  if (this._hadError) {\n    throw error;\n  }\n\n  if (nread >= kMaxLength) {\n    _close(this);\n    throw new RangeError(\n      \"Cannot create final Buffer. It would be larger than 0x\" +\n        kMaxLength.toString(16) +\n        \" bytes\"\n    );\n  }\n\n  let buf = Buffer.concat(buffers, nread);\n  _close(this);\n\n  return buf;\n};\n\nutil.inherits(Inflate, zlib.Inflate);\n\nfunction zlibBufferSync(engine, buffer) {\n  if (typeof buffer === \"string\") {\n    buffer = Buffer.from(buffer);\n  }\n  if (!(buffer instanceof Buffer)) {\n    throw new TypeError(\"Not a string or buffer\");\n  }\n\n  let flushFlag = engine._finishFlushFlag;\n  if (flushFlag == null) {\n    flushFlag = zlib.Z_FINISH;\n  }\n\n  return engine._processChunk(buffer, flushFlag);\n}\n\nfunction inflateSync(buffer, opts) {\n  return zlibBufferSync(new Inflate(opts), buffer);\n}\n\nmodule.exports = exports = inflateSync;\nexports.Inflate = Inflate;\nexports.createInflate = createInflate;\nexports.inflateSync = inflateSync;\n","import { PNG } from 'pngjs';\r\n\r\nconst METADATA_KEY = 'drawmotive';\r\n\r\n/**\r\n * Reads Drawmotive metadata from a PNG file\r\n * @param pngBuffer The PNG file buffer\r\n * @returns The metadata string, or null if not found\r\n */\r\nexport async function readPngMetadata(pngBuffer: Buffer): Promise<string | null> {\r\n    try {\r\n        if (pngBuffer.length === 0) {\r\n            return null;\r\n        }\r\n\r\n        const png: any = PNG.sync.read(pngBuffer);\r\n\r\n        // Check for metadata in text chunks\r\n        if (png.text && png.text[METADATA_KEY]) {\r\n            return png.text[METADATA_KEY];\r\n        }\r\n\r\n        return null;\r\n    } catch (error) {\r\n        console.error('Error reading PNG metadata:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Writes a PNG file with embedded Drawmotive metadata\r\n * @param pngBuffer The PNG image buffer\r\n * @param metadata The metadata string to embed\r\n * @returns The PNG buffer with embedded metadata\r\n */\r\nexport async function writePngWithMetadata(pngBuffer: Buffer, metadata: string): Promise<Buffer> {\r\n    try {\r\n        const png: any = PNG.sync.read(pngBuffer);\r\n\r\n        // Add metadata to text chunks\r\n        if (!png.text) {\r\n            png.text = {};\r\n        }\r\n        png.text[METADATA_KEY] = metadata;\r\n\r\n        // Write back to buffer\r\n        const outputBuffer = PNG.sync.write(png, {\r\n            colorType: png.colorType,\r\n            inputColorType: png.colorType,\r\n            bitDepth: png.bitDepth,\r\n            inputHasAlpha: true\r\n        });\r\n\r\n        return outputBuffer;\r\n    } catch (error) {\r\n        console.error('Error writing PNG metadata:', error);\r\n        throw new Error(`Failed to write PNG metadata: ${error}`);\r\n    }\r\n}\r\n\r\n/**\r\n * Creates an empty PNG with minimal dimensions\r\n * @returns An empty PNG buffer\r\n */\r\nexport function createEmptyPng(): Buffer {\r\n    const png = new PNG({\r\n        width: 800,\r\n        height: 600,\r\n        colorType: 6, // RGBA\r\n        bitDepth: 8\r\n    });\r\n\r\n    // Fill with white background\r\n    for (let y = 0; y < png.height; y++) {\r\n        for (let x = 0; x < png.width; x++) {\r\n            const idx = (png.width * y + x) << 2;\r\n            png.data[idx] = 255;     // R\r\n            png.data[idx + 1] = 255; // G\r\n            png.data[idx + 2] = 255; // B\r\n            png.data[idx + 3] = 255; // A\r\n        }\r\n    }\r\n\r\n    return PNG.sync.write(png);\r\n}\r\n","\"use strict\";\n\nlet crcTable = [];\n\n(function () {\n  for (let i = 0; i < 256; i++) {\n    let currentCrc = i;\n    for (let j = 0; j < 8; j++) {\n      if (currentCrc & 1) {\n        currentCrc = 0xedb88320 ^ (currentCrc >>> 1);\n      } else {\n        currentCrc = currentCrc >>> 1;\n      }\n    }\n    crcTable[i] = currentCrc;\n  }\n})();\n\nlet CrcCalculator = (module.exports = function () {\n  this._crc = -1;\n});\n\nCrcCalculator.prototype.write = function (data) {\n  for (let i = 0; i < data.length; i++) {\n    this._crc = crcTable[(this._crc ^ data[i]) & 0xff] ^ (this._crc >>> 8);\n  }\n  return true;\n};\n\nCrcCalculator.prototype.crc32 = function () {\n  return this._crc ^ -1;\n};\n\nCrcCalculator.crc32 = function (buf) {\n  let crc = -1;\n  for (let i = 0; i < buf.length; i++) {\n    crc = crcTable[(crc ^ buf[i]) & 0xff] ^ (crc >>> 8);\n  }\n  return crc ^ -1;\n};\n","\"use strict\";\n\nmodule.exports = function paethPredictor(left, above, upLeft) {\n  let paeth = left + above - upLeft;\n  let pLeft = Math.abs(paeth - left);\n  let pAbove = Math.abs(paeth - above);\n  let pUpLeft = Math.abs(paeth - upLeft);\n\n  if (pLeft <= pAbove && pLeft <= pUpLeft) {\n    return left;\n  }\n  if (pAbove <= pUpLeft) {\n    return above;\n  }\n  return upLeft;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(784);\n"],"names":["module","exports","require","SyncReader","buffer","this","_buffer","_reads","prototype","read","length","callback","push","Math","abs","allowLess","func","process","shift","buf","slice","call","Error","util","Stream","ChunkStream","_buffers","_buffered","_paused","_encoding","writable","inherits","nextTick","_process","emit","bind","write","data","encoding","dataBuffer","Buffer","isBuffer","from","end","_end","destroySoon","destroy","_processReadAllowingLess","smallerBuf","_processRead","pos","count","alloc","len","min","copy","splice","ex","constants","CrcStream","bitPacker","filter","zlib","Packer","options","_options","deflateChunkSize","deflateLevel","deflateStrategy","inputHasAlpha","deflateFactory","createDeflate","bitDepth","colorType","COLORTYPE_COLOR_ALPHA","inputColorType","COLORTYPE_GRAYSCALE","COLORTYPE_COLOR","COLORTYPE_ALPHA","indexOf","getDeflateOptions","chunkSize","level","strategy","filterData","width","height","packedData","bpp","COLORTYPE_TO_BPP_MAP","_packChunk","type","writeUInt32BE","writeInt32BE","crc32","packGAMA","gamma","floor","GAMMA_DIVISION","TYPE_gAMA","packIHDR","TYPE_IHDR","packIDAT","TYPE_IDAT","packIEND","TYPE_IEND","Parser","PNGSync","PNG","fill","readable","_parser","on","_handleClose","_metadata","_gamma","_packer","sync","pack","parse","onParsed","onError","parsedData","removeListener","err","once","metadata","bitblt","src","dst","srcX","srcY","deltaX","deltaY","y","adjustGamma","x","idx","i","sample","pow","round","hasSyncZlib","inflateSync","deflateSync","FilterSync","bitmapper","formatNormaliser","metaData","inflateDataList","reader","parser","error","_err_","_metaData_","_gamma_","palette","transColor","inflateData","inflatedData","simpleTransparency","alpha","start","concat","interlace","imageSize","depth","maxLength","unfilteredData","bitmapData","dataToBitMap","normalisedBitmapData","skipRescale","PackerAsync","opt","_deflate","PNG_SIGNATURE","filteredData","compressedData","indata","imageData","outdata","pxPos","color","dePalette","makeTrans","replaceTransparentColor","maxInSample","scaleDepth","packer","chunks","dataIn","outHasAlpha","bigEndian","ArrayBuffer","DataView","setInt16","Int16Array","Uint16Array","maxValue","inBpp","outBpp","outData","inIndex","outIndex","bgColor","getRGBA","red","green","blue","max","undefined","rgba","writeUInt16BE","grayscale","Filter","inBuffer","bitmapInfo","outBuffers","bufferPart","complete","context","static","constructor","resolveCustomTextEditor","document","webviewPanel","_token","webview","enableScripts","localResourceRoots","vscode","Uri","joinPath","extensionUri","html","getHtmlForWebview","onDidReceiveMessage","async","message","updateWebview","updateDocument","window","showErrorMessage","subscriptions","changeDocumentSubscription","workspace","onDidChangeTextDocument","e","uri","toString","onDidDispose","dispose","fileUri","fileData","fs","readFile","diagramData","readPngMetadata","postMessage","fileId","fsPath","pngData","console","raw","png","pngBuffer","finalPngBuffer","writePngWithMetadata","edit","WorkspaceEdit","fullRange","Range","positionAt","getText","base64Content","replace","applyEdit","save","indexPath","indexBytes","editorUri","asWebviewUri","match","path","startsWith","cspSource","CrcCalculator","dependencies","checkCRC","_hasIHDR","_hasIEND","_emittedHeadersFinished","_palette","_colorType","_chunks","_handleIHDR","_handleIEND","_handleIDAT","TYPE_PLTE","_handlePLTE","TYPE_tRNS","_handleTRNS","_handleGAMA","parsed","finished","headersFinished","_parseSignature","signature","_parseChunkBegin","readUInt32BE","name","String","fromCharCode","ancillary","Boolean","_crc","_skipChunk","_handleChunkEnd","_parseChunkEnd","fileCrc","readInt32BE","calcCrc","_parseIHDR","compr","COLORTYPE_PALETTE","_parsePLTE","entries","_parseTRNS","COLORTYPE_PALETTE_COLOR","readUInt16BE","_parseGAMA","_parseIDAT","leftOverLength","_parseIEND","FilterAsync","buffers","that","_filter","ParserAsync","_handleError","_handleMetaData","_handlePalette","_handleTransColor","_finished","_inflateData","_simpleTransparency","_headersFinished","_inflate","errord","_bitmapInfo","createInflate","_complete","pipe","Z_MIN_CHUNK","leftToInflate","emitError","filterWrite","chunk","_metaData","Object","create","interlaceUtils","paethPredictor","getByteWidth","byteWidth","ceil","_imageIndex","_images","passes","getImagePasses","lineIndex","_xComparison","_reverseFilterLine","_unFilterType1","rawData","unfilteredLine","xComparison","xBiggerThan","rawByte","f1Left","_unFilterType2","lastLine","_lastLine","f2Up","_unFilterType3","f3Up","f3Left","f3Add","_unFilterType4","f4Up","f4Left","f4UpLeft","f4Add","currentImage","pixelBppMapper","pxData","rawPos","pixel","pixelBppCustomMapper","pixelData","maxBit","mapImage8Bit","image","getPxPos","imageWidth","imageHeight","imagePass","index","mapImageCustomBit","bits","get","resetAfterLine","leftOver","split","byte8","byte7","byte6","byte5","byte4","byte3","byte2","byte1","byte","returner","bitRetriever","images","getInterlaceIterator","nonInterlacedPxPos","imageIndex","imagePasses","xLeftOver","yLeftOver","xRepeats","yRepeats","pass","passWidth","passHeight","j","outerXLeftOver","outerX","outerYLeftOver","log","provider","DrawmotiveEditorProvider","registration","registerCustomEditorProvider","webviewOptions","retainContextWhenHidden","supportsMultipleEditorsPerDocument","newDrawingCommand","commands","registerCommand","showSaveDialog","filters","saveLabel","emptyPngData","createEmptyPng","writeFile","executeCommand","left","val","up","upleft","filterSums","sum","filterTypes","filterType","sel","Infinity","assert","kMaxLength","Inflate","opts","_offset","_outOffset","_outBuffer","_maxLength","_close","engine","_handle","close","TypeError","flushFlag","_finishFlushFlag","Z_FINISH","_processChunk","zlibBufferSync","asyncCb","res","self","availInBefore","availOutBefore","_chunkSize","inOff","nread","handleChunk","availInAfter","availOutAfter","_hadError","have","out","allocUnsafe","writeSync","_writeState","RangeError","text","METADATA_KEY","crcTable","currentCrc","crc","above","upLeft","paeth","pLeft","pAbove","pUpLeft","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"ignoreList":[],"sourceRoot":""}